# 关于操作系统中的信号机制
[学习链接](http://rcore-os.cn/rCore-Tutorial-Book-v3/chapter7/4signal.html)
<br>
在读了这篇内容之后,对于进程的信号处理有了一些思考，希望理顺一下思路并记录下来。

+ 什么时候处理
<br>对于一个进程而言，当它主动或被动地进入Trap处理例程，Trap例程即将执行结束时，会进行信号处理
+ 处理的前提是什么
<br>一是有要处理的信号
<br>二是该信号目前没有被该进程屏蔽
<br>三是该信号没有被当前正在处理的信号屏蔽
+ 处理的流程是什么样的
<br> 进入signal_handler后，对于所有信号开始遍历：先检查此信号是否满足上面所有的前提，如果有一项以上不满足，直接continue;否则分类进入内核态的信号处理程序和用户态下的信号处理程序
+ 对于用户态下的信号处理程序，进一步的流程是什么
<br> 首先进入用户态信号处理程序的准备阶段，在进程控制块中记录当前正在处理的信号，然后备份程序进入trap例程时的trap上下文，然后准备回到用户态执行信号处理程序(此时上面的遍历过程将因直接return而break)
<br> 回到用户态下，假设信号处理程序没有被中断，成功执行到最后，调用了sigreturn系统调用返回，由于此时发生了系统调用，用户态要trap到内核态，换回原来的trap上下文（sigreturn的作用），然后处理其它信号
+ 那万一在用户态中的信号处理程序中也发生了trap呢，这个时候如果还发生新的用户态信号处理程序，那又该怎么备份呢？
<br>这种情况会造成极大的不便，我猜测可能用户态下的信号处理程序会屏蔽其它用户态下的信号处理程序，明天问一问学长，然后查查资料吧。
