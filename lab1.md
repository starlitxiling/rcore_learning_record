## 编程作业

#### 目标

实现系统调用TaskInfo，获取当前正在执行的任务信息，任务信息包括任务控制块相关信息(任务状态)、任务使用的系统调用以及次数、任务总运行时长(单位ms)


#### 思路
读完源代码之后，发现主要是需要自己实现获取系统调用以及次数和任务总运行时长
想到在TaskControlBlock这个结构体当中添加相关的两个字段，分别为
- `time` :记录时间
- `syscall_times`:记录次数

然后在os/src/task/mod.rs中实现get_task_info与increase_syscall_time方法，并对任务调度进行相应的时间更新，然后就可以了



## 简答作业
##### 1:
使用sbi版本：RustSBI version 0.3.0-alpha.2 第一个程序报错是访问了非法地址(0x0)
第二个程序报错是因为在U Mode下使用了在S态使用的sret指令
第三个程序报错是因为在U Mode下访问了S态的sstatus寄存器

##### 2:
i.a0代表了当前任务的trap的上下文
	a.恢复trap的上下文并继续执行
	b.从S Mode返回U Mode
ii.sstatus,spec,sscratch三个寄存器，sstatus恢复 CPU状态，spec保存了中断前要执行的指令，sscratch保存了内核的栈指针
iii.x2的值已经在sscratch寄存器中了，x4是因为没有被使用
iv.sp: 指向用户栈栈顶 sscratch: 指向内核栈栈顶
v.sret,因为它会设置sstatus中的spp字段为之前的特权级,且cpu会跳到spec寄存器的那条指令继续执行，从而实现特权级的切换
vi.sp: 指向内核栈栈顶 sscratch: 指向用户栈栈顶
vii.ecall


## 荣誉准则

1.  在完成本次实验的过程（含此前学习的过程）中，我曾分别与 **以下各位** 就（与本次实验相关的）以下方面做过交流，还在代码中对应的位置以注释形式记录了具体的交流对象及内容：
    
    chatgpt的代码分析
    
2.  此外，我也参考了 **以下资料** ，还在代码中对应的位置以注释形式记录了具体的参考来源及内容：
    
    riscv的指令集手册  

3. 我独立完成了本次实验除以上方面之外的所有工作，包括代码与文档。 我清楚地知道，从以上方面获得的信息在一定程度上降低了实验难度，可能会影响起评分。

4. 我从未使用过他人的代码，不管是原封不动地复制，还是经过了某些等价转换。 我未曾也不会向他人（含此后各届同学）复制或公开我的实验代码，我有义务妥善保管好它们。 我提交至本实验的评测系统的代码，均无意于破坏或妨碍任何计算机系统的正常运转。 我清楚地知道，以上情况均为本课程纪律所禁止，若违反，对应的实验成绩将按“-100”分计。